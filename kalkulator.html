<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Pecahan Ceria</title>
    <!-- Memuat Tailwind CSS untuk styling yang cepat dan responsif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Menggunakan font yang ramah anak */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* Pink Sangat Muda */
        }
        /* Custom style untuk garis pecahan */
        .fraction-line {
            display: inline-block;
            width: 100%;
            height: 2px;
            background-color: #4c51bf; /* Indigo */
            margin: 4px 0;
        }
        /* Style untuk display pecahan */
        .fraction-display {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 4px;
        }
        .pecahan-input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        input[type="number"] {
            -moz-appearance: textfield; /* Untuk Firefox */
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* Untuk Chrome, Safari, Edge */
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-center justify-center">

    <div class="container bg-white p-6 sm:p-10 rounded-2xl shadow-2xl max-w-xl w-full border-4 border-pink-500">
        
        <!-- BAGIAN BARU: Tombol Kembali ke Halaman Utama -->
        <a href="web sekolah.html" class="block py-2 px-3 rounded-md text-base font-medium hover:bg-blue-500">Kembali</a>
            &larr; 
        </a>

        <h1 class="text-3xl sm:text-4xl font-extrabold text-pink-600 mb-6 text-center">
            üéâ Kalkulator Pecahan Ceria üéâ
        </h1>
        <p class="text-gray-600 mb-8 text-center text-sm sm:text-base">
            Masukkan dua pecahan dan pilih operasi yang diinginkan. Yuk, kita hitung!
        </p>

        <!-- Bagian Input Pecahan -->
        <div class="flex flex-col space-y-8">
            
            <!-- Pecahan 1 -->
            <div class="pecahan-input-group">
                <span class="font-bold text-xl text-indigo-600 mr-2 hidden sm:inline">Pecahan 1:</span>
                
                <!-- Input Bilangan Bulat 1 -->
                <input type="number" id="bulat1" value="0" min="0" placeholder="B. Bulat" 
                       class="w-16 h-12 text-center text-xl font-bold border-2 border-purple-400 rounded-lg focus:border-purple-600 transition p-1">
                
                <!-- Display Pecahan 1 -->
                <div class="fraction-display w-16">
                    <input type="number" id="pembilang1" value="1" min="0" placeholder="Atas (p)" 
                           class="w-full text-center text-xl font-bold border-2 border-green-400 rounded-t-lg focus:border-green-600 transition p-1">
                    <div class="fraction-line"></div>
                    <input type="number" id="penyebut1" value="2" min="1" placeholder="Bawah (s)" 
                           class="w-full text-center text-xl font-bold border-2 border-green-400 rounded-b-lg focus:border-green-600 transition p-1">
                </div>
            </div>

            <!-- Operator dan Tombol Hitung -->
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                <select id="operator" 
                        class="p-3 border-4 border-yellow-500 rounded-xl bg-yellow-100 text-2xl font-extrabold text-yellow-800 focus:ring-4 focus:ring-yellow-300 transition shadow-md w-full sm:w-auto">
                    <option value="+">+</option>
                    <option value="-">-</option>
                    <option value="*">√ó</option>
                    <option value="/">√∑</option>
                </select>

                <button onclick="hitungPecahan()" 
                        class="w-full sm:w-1/2 p-4 bg-pink-500 hover:bg-pink-600 text-white font-extrabold text-2xl rounded-xl transition transform hover:scale-105 shadow-lg">
                    HITUNG!
                </button>
                
                <!-- TOMBOL Bersihkan Input -->
                <button onclick="resetInput()" 
                        class="w-full sm:w-1/2 p-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold text-xl rounded-xl transition transform hover:scale-105 shadow-lg">
                    BERSihkan Input
                </button>
            </div>

            <!-- Pecahan 2 -->
            <div class="pecahan-input-group">
                <span class="font-bold text-xl text-indigo-600 mr-2 hidden sm:inline">Pecahan 2:</span>
                
                <!-- Input Bilangan Bulat 2 -->
                <input type="number" id="bulat2" value="0" min="0" placeholder="B. Bulat" 
                       class="w-16 h-12 text-center text-xl font-bold border-2 border-purple-400 rounded-lg focus:border-purple-600 transition p-1">
                
                <!-- Display Pecahan 2 -->
                <div class="fraction-display w-16">
                    <input type="number" id="pembilang2" value="1" min="0" placeholder="Atas (p)" 
                           class="w-full text-center text-xl font-bold border-2 border-blue-400 rounded-t-lg focus:border-blue-600 transition p-1">
                    <div class="fraction-line bg-blue-600"></div>
                    <input type="number" id="penyebut2" value="3" min="1" placeholder="Bawah (s)" 
                           class="w-full text-center text-xl font-bold border-2 border-blue-400 rounded-b-lg focus:border-blue-600 transition p-1">
                </div>
            </div>
        </div>
        
        <!-- Area Hasil -->
        <h2 class="text-2xl font-bold text-indigo-700 mt-10 mb-4 border-t pt-4 border-gray-200 text-center">
            Hasil Jawaban:
        </h2>
        <div id="hasil" class="bg-yellow-50 text-gray-800 p-4 rounded-xl text-2xl sm:text-3xl font-extrabold border-4 border-yellow-400 min-h-20 flex items-center justify-center text-center">
            <!-- Hasil akan ditampilkan di sini -->
            Masukkan angka dan tekan HITUNG!
        </div>
    </div>

    <script>
        // Fungsi untuk mencari Faktor Persekutuan Terbesar (FPB)
        // Digunakan untuk menyederhanakan pecahan
        function gcd(a, b) {
            return b ? gcd(b, a % b) : a;
        }

        // Fungsi BARU untuk mereset semua input ke nilai awal
        function resetInput() {
            // Reset input pecahan 1
            document.getElementById('bulat1').value = '0';
            document.getElementById('pembilang1').value = '1';
            document.getElementById('penyebut1').value = '2';
            
            // Reset operator
            document.getElementById('operator').value = '+';
            
            // Reset input pecahan 2
            document.getElementById('bulat2').value = '0';
            document.getElementById('pembilang2').value = '1';
            document.getElementById('penyebut2').value = '3';
            
            // Reset area hasil
            document.getElementById('hasil').innerHTML = 'Masukkan angka dan tekan HITUNG!';
        }

        // Fungsi utama untuk menghitung operasi pecahan
        function hitungPecahan() {
            // 1. Ambil Nilai Input dan Pastikan Angka
            const bulat1 = parseInt(document.getElementById('bulat1').value) || 0;
            const pembilang1 = parseInt(document.getElementById('pembilang1').value) || 0;
            const penyebut1 = parseInt(document.getElementById('penyebut1').value) || 1;
            
            const operator = document.getElementById('operator').value;
            
            const bulat2 = parseInt(document.getElementById('bulat2').value) || 0;
            const pembilang2 = parseInt(document.getElementById('pembilang2').value) || 0;
            const penyebut2 = parseInt(document.getElementById('penyebut2').value) || 1;

            const hasilDiv = document.getElementById('hasil');

            // 2. Validasi Input (Penyebut tidak boleh Nol)
            if (penyebut1 === 0 || penyebut2 === 0) {
                hasilDiv.innerHTML = "<span class='text-red-600'>‚ùå **Penyebut tidak boleh nol!** Coba lagi, ya.</span>";
                return;
            }

            // 3. Konversi Pecahan Campuran ke Pecahan Biasa (a/b)
            // Rumus: (Bulat * Penyebut) + Pembilang / Penyebut
            const num1 = (bulat1 * penyebut1) + pembilang1; // Pembilang total 1
            const den1 = penyebut1;                        // Penyebut 1

            const num2 = (bulat2 * penyebut2) + pembilang2; // Pembilang total 2
            const den2 = penyebut2;                        // Penyebut 2

            let num_res, den_res; // Pembilang dan Penyebut Hasil

            // 4. Lakukan Operasi Berdasarkan Operator
            switch (operator) {
                case '+':
                    // Penjumlahan: (a/b) + (c/d) = (ad + bc) / bd
                    num_res = (num1 * den2) + (num2 * den1);
                    den_res = den1 * den2;
                    break;
                case '-':
                    // Pengurangan: (a/b) - (c/d) = (ad - bc) / bd
                    num_res = (num1 * den2) - (num2 * den1);
                    den_res = den1 * den2;
                    break;
                case '*':
                    // Perkalian: (a/b) * (c/d) = (a * c) / (b * d)
                    num_res = num1 * num2;
                    den_res = den1 * den2;
                    break;
                case '/':
                    // Pembagian: (a/b) / (c/d) = (a * d) / (b * c)
                    num_res = num1 * den2;
                    den_res = den1 * num2;
                    
                    // Cek pembagian dengan nol
                    if (den_res === 0) {
                        hasilDiv.innerHTML = "<span class='text-red-600'>‚ö†Ô∏è Hasil tak terdefinisi (Pembagian dengan nol).</span>";
                        return;
                    }
                    break;
                default:
                    hasilDiv.innerHTML = "<span class='text-red-600'>Pilih operator yang benar!</span>";
                    return;
            }

            // 5. Sederhanakan Pecahan Hasil
            // Ambil nilai absolut untuk mencari FPB
            const fpb = gcd(Math.abs(num_res), Math.abs(den_res));
            
            const sederhana_num = num_res / fpb;
            const sederhana_den = den_res / fpb;

            // 6. Konversi ke Pecahan Campuran (Bilangan Bulat + Pecahan Murni)
            const hasil_bulat = Math.floor(Math.abs(sederhana_num) / sederhana_den);
            const hasil_pembilang = Math.abs(sederhana_num) % sederhana_den;
            const tanda = sederhana_num < 0 ? '-' : '';
            
            // Tentukan tampilan akhir
            let hasil_teks = "";

            if (hasil_pembilang === 0) {
                // Hasil berupa bilangan bulat murni (misal: 1/1 = 1)
                hasil_teks = `${tanda}${hasil_bulat + (Math.abs(sederhana_num) > 0 ? 0 : Math.abs(sederhana_num) / sederhana_den)}`; 
                if (hasil_bulat === 0) {
                    hasil_teks = tanda + (Math.abs(sederhana_num) / sederhana_den); // Kasus khusus 0/-1
                }

            } else {
                // Pecahan Murni atau Campuran
                let pecahan_murni_html = `
                    <div class="fraction-display w-16 text-2xl sm:text-3xl">
                        <span class="text-xl sm:text-2xl">${hasil_pembilang}</span>
                        <div class="fraction-line bg-indigo-600 w-full"></div>
                        <span class="text-xl sm:text-2xl">${sederhana_den}</span>
                    </div>`;

                if (hasil_bulat > 0) {
                    // Pecahan Campuran
                    hasil_teks = `<span class="text-3xl sm:text-4xl mr-2">${tanda}${hasil_bulat}</span> ${pecahan_murni_html}`;
                } else {
                    // Pecahan Murni (Contoh: 1/2)
                    hasil_teks = `${tanda} ${pecahan_murni_html}`;
                }
            }
            
            // Tampilkan hasil
            hasilDiv.innerHTML = hasil_teks;
        }
    </script>
</body>
</html>
